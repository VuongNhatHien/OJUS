services:
  online-judge:
    image: nhathien/ojus-docker:latest
    ports:
      - "8080:8080"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./codeFiles:/app/codeFiles
    privileged: true
    depends_on:
      - gcc
      - py
      - js
      - java

  gcc:
    image: gcc:latest
    container_name: gcc-container
    command: tail -f /dev/null
    volumes:
      - ./codeFiles:/codeFiles

  py:
    image: python:3.10-slim
    container_name: py-container
    command: tail -f /dev/null
    volumes:
      - ./codeFiles:/codeFiles
  js:
    image: node:16.17.0-bullseye-slim
    container_name: js-container
    command: tail -f /dev/null
    volumes:
      - ./codeFiles:/codeFiles
  java:
    image: openjdk:20-slim
    container_name: java-container
    command: tail -f /dev/null
    volumes:
      - ./codeFiles:/codeFiles

#services:
#  mysql:
#    image: mysql:8
#    restart: always
#    environment:
#      MYSQL_ROOT_PASSWORD: 123
#    ports:
#      - "3307:3306"
#    volumes:
#      - ./mysql:/var/lib/mysql
#      - ./init.sql:/code-executor-entrypoint-initdb.d/init.sql
#
#  mysql_test:
#    image: mysql:8
#    restart: always
#    environment:
#      MYSQL_ROOT_PASSWORD: 123
#    ports:
#      - "3308:3306"
#    volumes:
#      - ./mysql_test:/var/lib/mysql
#      - ./init_test.sql:/docker-entrypoint-initdb.d/init_test.sql